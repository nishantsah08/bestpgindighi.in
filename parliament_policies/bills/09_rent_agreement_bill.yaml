# Defines the policy for generating and managing rent agreements.
version: 4.0 # Added automated renewal process
policy_type: legal

versioning_policy:
  - type: 'semantic_versioning_with_data_link'
    description: 'This policy follows semantic versioning. Every executed rent agreement is a legal document and must be versioned and stored immutably. The tenant record must link to the exact version of the agreement they signed.'
    data_impact: 'This is a cornerstone document. The system must ensure that the signed artifact is preserved perfectly.'

parameters_file: '09_rent_agreement_parameters.md'
depends_on:
  - 'parliament_policies/bills/01_tenant_onboarding_bill.yaml'
  - 'parliament_policies/bills/02_monthly_billing_collections_bill.yaml'

core_principles:
  - 'The official source for the rent agreement is the version-controlled template located at `templates/rent_agreement_v1.md`.'
  - 'The rent agreement must be executed digitally via a third-party e-sign provider that supports Aadhar-based e-signatures.'
  - 'The agreement process can only be initiated after the tenant has reached the `ready_for_agreement` state in the Tenant Onboarding policy, which requires the payment of both the full first month''s rent AND the full security deposit.'
  - 'The cost of the e-signing service is a billable event and will be added to the tenant''s next monthly bill.'
  - 'The system must store a versioned, immutable copy of the exact agreement sent to the tenant for signing.'

renewal_process:
  - type: 'automated_workflow'
    description: 'Defines the automated process for renewing tenant rent agreements.'
    trigger:
      - type: 'scheduled_check'
      - description: 'The system will scan the `rent_agreements` collection daily.'
      - condition: 'An agreement is 45 days from its `end_date` and its `status` is `ACTIVE`.'
    workflow_steps:
      - 'Step 1: The system creates a renewal task and assigns it to the Sales role.'
      - 'Step 2: The system sends an automated notification to the tenant via WhatsApp, informing them of the upcoming renewal and that a sales agent will be in touch.'
      - 'Step 3: The Sales agent negotiates the renewal terms with the tenant.'
      - 'Step 4: Once terms are agreed, the Sales agent initiates the e-signing process for the new agreement.'
      - 'Step 5: Upon successful signing, the system updates the old agreement''s status to `RENEWED` and creates a new agreement record with the status `ACTIVE`.'
