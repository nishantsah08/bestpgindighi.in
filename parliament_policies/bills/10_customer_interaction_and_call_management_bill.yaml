title: "Customer Interaction and Call Management Bill"
status: "active"
version: 8.0 # Added transcription provider strategy and role-based analysis rules.
# This bill governs the handling of all inbound communications on the System Operations Channel (SOC).

contact_identification_standard:
  - rule: "E.164 as Canonical Standard for Phone Numbers"
    description: "To ensure global compatibility and data integrity, all customer phone numbers must be stored in the E.164 format (e.g., +917588498834). This is the single source of truth for contact identification."
    implementation:
      - "The system will use the 'phonenumbers' Python library for all parsing, validation, and formatting."
      - "For ambiguous numbers (e.g., a 10-digit number without a country code), the system will assume 'IN' (India) as the default region."

transcription_provider_strategy:
  - rule: "Cost-Optimized Waterfall for Transcription Services"
    description: "To minimize operational costs, the system will intelligently route transcription jobs to different providers, prioritizing free tiers before falling back to the most cost-effective paid service."
    provider_priority:
      - "1. Google Speech-to-Text (Free Tier: 60 mins/month)"
      - "2. Azure Speech to Text (Free Tier: 5 hours/month)"
      - "3. Deepgram (Paid Tier: Lowest cost per hour)"
    implementation:
      - "The system must track monthly usage of the Google and Azure free tiers."
      - "Jobs will be routed to the highest-priority provider with remaining free-tier capacity."
      - "If all free tiers are exhausted, jobs will be routed to Deepgram."

role_based_analysis_rules:
  - rule: "Differentiated Analysis Based on Caller Role"
    description: "To further optimize costs and focus resources, the system applies different analysis rules based on the source of the call."
    rules:
      - role: "Sales"
        condition: "Always transcribe and analyze."
        rationale: "Every sales call is a potential new lead or a critical customer interaction."
      - role: "CEO"
        condition: "Only transcribe and analyze if the customer's phone number already exists in the contacts database."
        rationale: "Prevents resource expenditure on non-customer calls."
      - role: "Caretaker"
        condition: "Only transcribe and analyze if the customer's phone number already exists in the contacts database."
        rationale: "Prevents resource expenditure on non-customer calls."

inbound_communication:
  - rule: "AI-Powered Intent Recognition and Routing for All Media Types"
    description: "All inbound messages and media files on the SOC will be processed by an AI service to determine user intent and extract relevant entities. This derived intent is the primary driver for all subsequent system actions."
    processing_flow:
      - "Step 1: Receive inbound communication (text, image, or document) from the SOC."
      - "Step 2: If the communication is text, submit it to the NLU service. If it is a media file, submit it to the OCR/NLU service."
      - "Step 3: Route the resulting structured intent object to the appropriate MCP (Ministerial Capability Platform) queue based on the classified intent (e.g., 'intent_file_expense_from_document' -> 'financial_ai_queue')."
      - "Step 4: For any intent classified as having financial, legal, or data-modification consequences, the receiving agent MUST initiate the mandatory 'AI Confirmation Loop' as defined in the Constitution before taking any action."